---
title: "Exploring Mac Miller's Discography with Spotify API"
author: "Collin Smith"
date: '2022-05-19'
output: github_document
---

### Welcome!

Hello, and welcome to my very first Markdown publication. I am still relatively 
new to R, with about 2 years of exposure and experience with the language. 
The vast majority of my time spent with R has been for university courses. 
Throughout this time I have learned a great deal from books like 
Hadley Wickham's [R for Data Science](https://r4ds.had.co.nz/), as well as 
tutorials, articles, and markdown pages from sites such as 
[RPubs](https://rpubs.com/), [R-bloggers](https://www.r-bloggers.com/), 
and [Towards Data Science](https://towardsdatascience.com/). 
My hope is that this project can in turn be used to help someone else down 
the road, as others have helped me.

In this project, we will be exploring how to use Spotify's API and 
the **spotifyr** package to access data about a particular artists discography. 
We'll also be utilizing the **genius** package to retrieve lyrics for 
songs, allowing for sentiment to be explored and visualized.

### Obtaining Spotify API Credentials

To begin, we will first need to head over to the 
[Spotify for Developers](https://developer.spotify.com/dashboard/) page, 
where we will be registering an application to obtain an API key. Once you've 
logged in, select "Create an App" and fill out the required fields. Completing 
this will give you access to two important fields: your **client id** and 
your **client secret** (or API key). These fields will be used to let the
API know who is accessing it and that you have proper authentication. 
To get started, first install the **spotifyr** package if you don't already
have it.

```{r pkg-install, eval = F, include = T}
install.packages("spotifyr")
```

Next, we can use the following code to pass out authentication credentials
to the API, giving us access.

```{r auth-example, eval = F, include = T}
Sys.setenv(SPOTIFY_CLIENT_ID = 'your client id')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'your client secret')
access_token <- get_spotify_access_token()
```

```{r auth-actual, eval = T, echo = F}
source('auth_func.R')
authenticate()
```

### Gathering the Data

Now that you are authenticated with the API, we can begin using the 
**spotifyr** package's functions to retrieve information.
In this project, we will be analyzing Mac Miller's discography and exploring 
how his sound changed throughout his career. To get information regarding 
a single artist's discography, we can use the `get_artist_audio_features()` 
function. The function will return a dataframe containing information about all 
of the artists' music that is hosted on Spotify. The function takes many 
possible arguments, but for the sake of this project, we only need to pass in 
one: the name of the artist for which we wish to get information.

```{r get-data, echo = T}
library(spotifyr)
mm_data <- get_artist_audio_features(artist = "Mac Miller")
```

To check that this function performed as expected, let's take a very quick
glance at the returned dataframe.

```{r data-check, echo = T}
colnames(mm_data)
unique(mm_data$album_name)
head(mm_data$track_name, 15)
dim(mm_data)
```

Excellent! The returned dataframe contains ``r dim(mm_data)[1]`` observations,
or in this case songs, and each observation has ``r dim(mm_data)[2]`` variables.
We can see from the `unique(mm_data$album_name)` function that the albums are
listed in order of upload date, with Faces being the most recent album added
to Mac's Spotify page. While this may seem handy, it is important to note that
the order in which albums are uploaded to Spotify is not always the same order
that the albums were released. We can observe this by taking a look at the
`album_release_date` variable.

```{r libs, echo = F}
library(tidyverse)
library(plotly)
```

```{r album-dates, echo = T}
mm_data %>% 
  select(album_name, album_release_date) %>%
  distinct() %>% knitr::kable()
```

This readout implies that Faces is the most recent album to release. However,
by checking Mac's 
[discography](https://en.wikipedia.org/wiki/Mac_Miller_discography), we can see
that Faces was actually released as a mixtape back in 2014, much earlier than
the variable from Spotify's data would suggest. Since this project involves 
analyzing how Mac's music changed throughout the duration of his career, it is
important to have accurate ordering of dates associated with the albums.
